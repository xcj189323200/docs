{"remainingRequest":"/Users/xuchangjian/workspace/my/pc/docs/node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js??ref--1-1!/Users/xuchangjian/workspace/my/pc/docs/node_modules/_vuepress@0.14.11@vuepress/lib/webpack/markdownLoader.js??ref--1-2!/Users/xuchangjian/workspace/my/pc/docs/src/rules/rules.md?vue&type=template&id=2dc17207&","dependencies":[{"path":"/Users/xuchangjian/workspace/my/pc/docs/src/rules/rules.md","mtime":1559213892796},{"path":"/Users/xuchangjian/workspace/my/pc/docs/node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xuchangjian/workspace/my/pc/docs/node_modules/_vue-loader@15.7.0@vue-loader/lib/loaders/templateLoader.js","mtime":499162500000},{"path":"/Users/xuchangjian/workspace/my/pc/docs/node_modules/_cache-loader@1.2.5@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/xuchangjian/workspace/my/pc/docs/node_modules/_vue-loader@15.7.0@vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/xuchangjian/workspace/my/pc/docs/node_modules/_vuepress@0.14.11@vuepress/lib/webpack/markdownLoader.js","mtime":499162500000}],"contextDependencies":[],"result":["\n<div class=\"content\"><h1 id=\"声明：\">声明：</h1>\n<blockquote>\n<p>该协议的前提是将一切可以通过http进行传输的内容当做是信息资源，协议是针对这些具备资源性质（实际上，任何提供http请求的服务都可以抽象成资源，或者与资源相关的内容）的API的约束</p>\n</blockquote>\n<h1 id=\"一、基本约定\">一、基本约定</h1>\n<ul>\n<li><strong>URL地址采用小写形式，禁止使用驼峰形式的路径</strong></li>\n<li><strong>非参数部分的URL地址中的分隔符采用连接号：&quot;-&quot;，禁止使用下划线：&quot;_&quot;</strong></li>\n<li><strong>参数名称一致采用&quot;_&quot;下划线分割的形式</strong></li>\n<li><strong>路径或参数名称避免出现中文字样</strong></li>\n</ul>\n<h1 id=\"二、url的组成\">二、URL的组成</h1>\n<p>URL（不含参数部分）的基本组成如下：</p>\n<blockquote>\n<p>http://{domain}/{namespace}/{version}/{resoure}</p>\n</blockquote>\n<h2 id=\"_2-1-域名（domain）\">2.1 域名（domain）</h2>\n<p><code>API中心</code> 统一采用：<code>http://api-bigdata.huan.tv/</code>作为域名</p>\n<h2 id=\"_2-2-项目名（namespace）\">2.2 项目名（namespace）</h2>\n<p>默认情况下，<code>API中心</code>接口按照项目进行分类，名称由<code>主题项目名称</code> + <code>-api</code>两部分组成\n<em>示例：</em></p>\n<!--beforebegin--><div class=\"language- extra-class\"><!--afterbegin--><pre v-pre class=\"language-text\"><code># 正确示例\nhttp://api-bigdata.huan.tv/example-api    示例项目接口\nhttp://api-bigdata.huan.tv/csm-huan-api    实时收视项目接口\nhttp://api-bigdata.huan.tv/tv-zone-api    电视社区项目接口\nhttp://api-bigdata.huan.tv/group-insight-api    睛准洞察接口\n</code></pre>\n<!--beforeend--></div><!--afterend--><h2 id=\"_2-3-版本（version）\">2.3 版本（version）</h2>\n<p>使用 v{n} 对<code>API接口</code>进行版本管理，其中 n 为<code>大于0</code>的<code>整数</code>值；接口调整时,若仅仅是为资源添加某些属性，且能够兼容之前接口的数据，则不必调整接口版本（即：禁止出现小版本，如1.1,2.3等版本号，但需要注意及时更新接口文档）\n<em>示例：</em></p>\n<!--beforebegin--><div class=\"language- extra-class\"><!--afterbegin--><pre v-pre class=\"language-text\"><code># 正确示例\n/example-api/v1\n/csm-huan-api/v2\n/tv-zone-api/v1\n# 错误示例\n/example-api/v1.4\n/csm-huan-api/v2.3.7\n</code></pre>\n<!--beforeend--></div><!--afterend--><h2 id=\"_2-4-资源（resource）\">2.4 资源（resource）</h2>\n<p>资源是对作用对象的一种描述，主要可以分为以下三种类型：</p>\n<ul>\n<li>数据\n可以通过<code>IO流</code>在网络进行传输，而且可以持久化到计算机中的内容(如：文档，图片，特定的数据等)\n<em>示例：</em></li>\n</ul>\n<!--beforebegin--><div class=\"language- extra-class\"><!--afterbegin--><pre v-pre class=\"language-text\"><code># 正确示例\nGET-&gt;/tv-zone-api/v1/reach    电视社区终端到达信息\nGET-&gt;/csm-huan-api/v1/ratings    实时收视率信息\nGET-&gt;/insight-api/v1/interests    睛准洞察的兴趣偏好信息【宽泛的资源定义，可以包含多个指标】\n</code></pre>\n<!--beforeend--></div><!--afterend--><ul>\n<li>状态\n对事情完成程度或事物所处形态的描述信息\n<em>示例：</em></li>\n</ul>\n<!--beforebegin--><div class=\"language- extra-class\"><!--afterbegin--><pre v-pre class=\"language-text\"><code># 正确示例\nGET-&gt;/csm-huan-api/v1/ivc-load-status/20181010    加权加载的状态[prepare,loaded]【查看性质的状态】\nPUT-&gt;/example-api/page-open-status?closed=true    关闭页面，禁止对外开放【更改性质的状态】\n</code></pre>\n<!--beforeend--></div><!--afterend--><ul>\n<li>动作（操作）\n使用者（一般指使用系统的人）对现有资源采取的行为\n**提示：**一般采用动作作用的对象作为资源名词，如果作用对象是系统或系统外的资源，可以直接省略资源名字\n<em>示例：</em></li>\n</ul>\n<!--beforebegin--><div class=\"language- extra-class\"><!--afterbegin--><pre v-pre class=\"language-text\"><code># 正确示例\nDELETE-&gt;/insight-api/v1/users/123    删除[用户]\nPOST-&gt;/example-api/v1/login    登录[系统]\n</code></pre>\n<!--beforeend--></div><!--afterend--><p>**提示：**协议使用者应该根据自己的业务场景，确认业务所使用的数据，将其抽象成为以上三种资源中的一种或几种资源，进而进行接口开发</p>\n<h1 id=\"三、url-规范\">三、URL 规范</h1>\n<h2 id=\"_3-1-url约束（不含参数部分）\">3.1 URL约束（不含参数部分）</h2>\n<ul>\n<li><strong>资源导向</strong>\n每个URL都是对某个或某些资源的描述，因此URL中必须是名词性的词语，且必须为名词性复数形式\n<em>示例：</em></li>\n</ul>\n<!--beforebegin--><div class=\"language- extra-class\"><!--afterbegin--><pre v-pre class=\"language-text\"><code># 正确示例\nGET-&gt;/example-api/v1/users    获取用户列表\nGET-&gt;/example-api/v1/channels    获取频道列表\nGET-&gt;/tv-zone-api/v1/reach    电视社区终端到达信息\nGET-&gt;/csm-huan-api/v1/ratings    实时收视率信息\nGET-&gt;/example-api/v1/ratings/20181010    获取2018年10月10日的收视率信息\nGET-&gt;/insight-api/v1/interests    睛准洞察的兴趣偏好信息【宽泛的资源定义，可以包含多个指标】\n# 错误示例\n× GET-&gt;/example-api/v1/programs/showed    其中 showed 属于非名词性资源,因此可以使用查询参数进行限定\n√ GET-&gt;/example-api/v1/programs?showed=true\n</code></pre>\n<!--beforeend--></div><!--afterend--><ul>\n<li><strong>（资源）范围递减</strong>\nURL中的资源需要按照从整体到局部的方式递进，即资源由较大范围向较小范围过渡，形成包含关系。<strong>建议最多有一层递进关系</strong>。\n<em>示例：</em></li>\n</ul>\n<!--beforebegin--><div class=\"language- extra-class\"><!--afterbegin--><pre v-pre class=\"language-text\"><code># 正确示例\nGET-&gt;/csm-huan/v1/channels/35city    获取35城样本对应的所有频道\n# 不推荐示例\nGET-&gt;/csm-huan/v1/audiences/52city/20181010    获取2018年10月10日52城的收视率信息\n</code></pre>\n<!--beforeend--></div><!--afterend--><ul>\n<li><strong>（资源）由一般到特殊</strong>\n访问某个资源时，要么访问整个资源列表，要么访问具体的某个特定资源\n<em>示例：</em></li>\n</ul>\n<!--beforebegin--><div class=\"language- extra-class\"><!--afterbegin--><pre v-pre class=\"language-text\"><code># 正确示例\nGET-&gt;/example-api/v1/channels/    获取所有的频道列表\nGET-&gt;/example-api/v1/channels/cctv1    获取 channel_code 为 cctv1 的频道信息\nGET-&gt;/example-api/v1/reach/20181010    获取2018年10月10日的终端到达信息\n</code></pre>\n<!--beforeend--></div><!--afterend--><ul>\n<li><strong>减少资源嵌套关系</strong>\nURL路径最多出现两层嵌套资源（/example-api/v1/collection/id/collection/id），<strong>推荐使用不嵌套资源的方式</strong>，即：/example-api/v1/collection/id\n<em>示例：</em></li>\n</ul>\n<!--beforebegin--><div class=\"language- extra-class\"><!--afterbegin--><pre v-pre class=\"language-text\"><code># 正确示例\nGET-&gt;/example-api/v1/channels/cctv1/programs    获取cctv1频道的节目信息\nGET-&gt;/example-api/v1/channels/cctv1/reach/20181010    获取cctv1频道2018年10月10日的终端到达信息\n# 推荐示例\nGET-&gt;/example-api/v1/programs?channel_code=cctv1    获取cctv1频道的节目信息\nGET-&gt;/example-api/v1/reach/20181010?channel_code=cctv1    获取cctv1频道2018年10月10日的终端到达信息\n</code></pre>\n<!--beforeend--></div><!--afterend--><ul>\n<li><strong>ID或时间限定资源</strong>\nURL中两种资源限定方式：ID性质和时间性质(时间格式为采用：YYYYMMDDHHmmss，不含任何分隔符的形式)\n<em>示例：</em></li>\n</ul>\n<!--beforebegin--><div class=\"language- extra-class\"><!--afterbegin--><pre v-pre class=\"language-text\"><code># 正确示例\nGET-&gt;/example-api/v1/channels/antv    获取channel_code是antv的频道信息\nGET-&gt;/example-api/v1/reach/20181010    获取2018年10月10日的终端到达信息\n</code></pre>\n<!--beforeend--></div><!--afterend--><h2 id=\"_3-2-参数规范\">3.2 参数规范</h2>\n<p>参数用来筛选和精确定位资源信息，当采用URL的基本规范无法正确锁定资源时，可以将限制性的操作放置到参数中</p>\n<ul>\n<li><strong>记录数</strong>\n当一个资源集合记录数<code>大于200</code>时，推荐添加<code>limit</code>参数，以限制结果集的记录条数\n<em>示例：</em></li>\n</ul>\n<!--beforebegin--><div class=\"language- extra-class\"><!--afterbegin--><pre v-pre class=\"language-text\"><code># 正确示例\nGET-&gt;/example-api/v1/programs/20181010?limit=50    获取2018年10月10日所有频道的节目单信息中的前50个\n</code></pre>\n<!--beforeend--></div><!--afterend--><ul>\n<li><strong>分页查询</strong>\n当一个资源集合记录数<code>大于200</code>时，推荐添加<code>page</code>和<code>page_size</code>两个参数,实现<code>分页查询</code>功能，以避免一次性加载大量数据导致响应过慢\n<em>示例：</em></li>\n</ul>\n<!--beforebegin--><div class=\"language- extra-class\"><!--afterbegin--><pre v-pre class=\"language-text\"><code># 正确示例\nGET-&gt;/example-api/v1/programs/20181010?page=2&amp;page_size=25    获取2018年10月10日第2页（每页25条记录）的节目数据\n</code></pre>\n<!--beforeend--></div><!--afterend--><ul>\n<li><strong>TOP查询</strong>\n当判断一个资源有可能需要排序时，推荐添加<code>sort</code>和<code>order</code>两个参数，提供<code>排序</code>和<code>排序方式</code>的支持，当排序字段大于1时，可以用逗号“,”进行分隔，如果多个排序字段排序方式相同order可以只写1个，否则按照排序字段依次对应，并以逗号“,”分隔；当资源有可能取<code>TOP</code>时，推荐添加<code>top</code>参数，提供<code>TopN</code>功能\n<em>示例：</em></li>\n</ul>\n<!--beforebegin--><div class=\"language- extra-class\"><!--afterbegin--><pre v-pre class=\"language-text\"><code># 正确示例\nGET-&gt;/example-api/v1/programs/20181010?sort=channelName&amp;order=asc    获取2018年10月10日的节目信息，并按照频道名称正序输出\nGET-&gt;/example-api/v1/programs/20181010?sort=channelName,programName&amp;order=asc    获取2018年10月10日的节目信息，并按照频道名称节目名称正序输出\nGET-&gt;/example-api/v1/programs/20181010?sort=channelName,programName&amp;order=asc,desc    获取2018年10月10日的节目信息，并按照频道名称正序,节目名称倒叙输出\nGET-&gt;/example-api/v1/programs/20181010?sort=channelName,programName&amp;order=asc&amp;top=50 获取2018年10月10日的节目信息，并按照频道名称节目名称正序输出前50个\n</code></pre>\n<!--beforeend--></div><!--afterend--><ul>\n<li><strong>其他过滤</strong>\n除ID和时间限定资源外，还可以添加其他限制性的参数\n示例：</li>\n</ul>\n<!--beforebegin--><div class=\"language- extra-class\"><!--afterbegin--><pre v-pre class=\"language-text\"><code># 正确示例\nGET-&gt;/data-summary-api/v1/boots/20181010?scene=ub    获取2018年10月10日UB场景数据对应的开机信息\nGET-&gt;/csm-huan-api/v1/channels?channel_type=cctv    获取所有央视频道信息\n</code></pre>\n<!--beforeend--></div><!--afterend--><h2 id=\"_3-3-项目根路径规范\">3.3 项目根路径规范</h2>\n<p>超媒体驱动(通俗解释)</p>\n<blockquote>\n<p>通过引入业务的相关链接进行广告的一种方式。通过超媒体链接，你可以告诉用户接下来他（她）该怎么操作（网上下单：选商品-&gt;加购物车-&gt;结算-推荐附属商品），也可以告诉用户你想让他了解哪方面的业务信息。【概括：用户想知道什么和你想让用户知道什么】</p>\n</blockquote>\n<p><code>API中心</code> 接口协议按照项目进行分类划分，因此项目级别的路径被视为根路径。当客户端请求根路径时，会返回该项目中常用的接口服务，形成超媒体驱动。比如，使用者可以将自己的项目按照不同的业务线进行规划，然后将业务的起点接口（一般指 top 级别的资源列表接口）列举出来归入根路径接口列表中，让用户可以通过<code>超媒体链接</code>逐步深入业务逻辑，获取用户想要的信息或者系统想要让用户知道的信息。\n<em>请求示例：</em></p>\n<blockquote>\n<p>GET-&gt;http://api-badata.huan.tv/example-api</p>\n</blockquote>\n<p><em>响应示例：</em></p>\n<!--beforebegin--><div class=\"language-json extra-class\"><!--afterbegin--><pre v-pre class=\"language-json\"><code><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"users_url\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"http://api‐bigdata.huan.tv/example-api/v1/users\"</span><span class=\"token punctuation\">,</span>  # key 为资源名称复数 + ‘_url’ 组成\n    <span class=\"token property\">\"programs_url\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"http://api‐bigdata.huan.tv/example-api/v1/programs\"</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<!--beforeend--></div><!--afterend--><h2 id=\"_3-4-请求方法规范\">3.4 请求方法规范</h2>\n<ul>\n<li><strong>GET</strong>\n获取某个资源信息</li>\n</ul>\n<ul>\n<li>\n<ul>\n<li>获取某个特定资源\n<em>请求示例：</em></li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>GET-&gt;http://api-bigdata.huan.tv/example-api/v2/users/123</p>\n</blockquote>\n<pre><code>*响应结果：*\n</code></pre>\n<!--beforebegin--><div class=\"language-json extra-class\"><!--afterbegin--><pre v-pre class=\"language-json\"><code><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"code\"</span><span class=\"token operator\">:</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span>    # 非<span class=\"token number\">2</span>xx的code表示请求响应正常\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"sucess\"</span><span class=\"token punctuation\">,</span>    # message表示请求结果的状态或提示性信息\n    <span class=\"token property\">\"data\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"resource\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"users\"</span>\n        <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"123\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"Merry\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"address\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"北京市朝阳区劲松\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"email\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"merry@126.com\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"mobile\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"13388888888\"</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<!--beforeend--></div><!--afterend--><ul>\n<li>\n<ul>\n<li>请求某个集合资源\n<em>请求示例：</em></li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>GET-&gt;http://api-bigdata.huan.tv/example-api/v2/users</p>\n</blockquote>\n<pre><code>*响应结果：*\n</code></pre>\n<!--beforebegin--><div class=\"language-json extra-class\"><!--afterbegin--><pre v-pre class=\"language-json\"><code><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"code\"</span><span class=\"token operator\">:</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span>    # 非<span class=\"token number\">2</span>xx的code表示请求响应正常\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"sucess\"</span><span class=\"token punctuation\">,</span>    # message表示请求结果的状态\n    <span class=\"token property\">\"data\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"resource\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"users\"</span>\n            <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"123\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"Merry\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"address\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"北京市朝阳区劲松\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"email\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"merry@126.com\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"mobile\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"13388888888\"</span>\n        <span class=\"token punctuation\">}</span>，<span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"resource\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"users\"</span>\n            <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"234\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"Jhon\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"address\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"北京市朝阳区劲松\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"email\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"jhon@126.com\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"mobile\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"13388888888\"</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        ......\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"props\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"total\"</span><span class=\"token operator\">:</span> <span class=\"token number\">239</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"cur_page\"</span><span class=\"token operator\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"There are many users will disable in a fews days.\"</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<!--beforeend--></div><!--afterend--><ul>\n<li><strong>POST</strong>\n新建一个资源\n<em>请求示例：</em></li>\n</ul>\n<blockquote>\n<p>POST-&gt;http://api-bigdata.huan.tv/example-api/v1/users</p>\n</blockquote>\n<pre><code>*响应结果：*\n</code></pre>\n<!--beforebegin--><div class=\"language-json extra-class\"><!--afterbegin--><pre v-pre class=\"language-json\"><code><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"code\"</span><span class=\"token operator\">:</span><span class=\"token number\">201</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"created\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"location\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"http://api-bigdata.huan.tv/example-api/v1/users/345\"</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<!--beforeend--></div><!--afterend--><ul>\n<li><strong>PUT</strong>\n更新已有资源\n<em>请求示例：</em></li>\n</ul>\n<blockquote>\n<p>PUT-&gt;http://api-bigdata.huan.tv/example-api/v1/users/123</p>\n</blockquote>\n<pre><code>*响应结果：*\n</code></pre>\n<!--beforebegin--><div class=\"language-json extra-class\"><!--afterbegin--><pre v-pre class=\"language-json\"><code><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"code\"</span><span class=\"token operator\">:</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span>    # 非<span class=\"token number\">2</span>xx的code表示请求响应正常\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"updated\"</span><span class=\"token punctuation\">,</span>    # message表示请求结果的状态<span class=\"token punctuation\">,</span>更新完成\n    <span class=\"token property\">\"data\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"resource\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"users\"</span>\n        <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"123\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"Merry\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"address\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"北京市朝阳区劲松\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"email\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"merry@126.com\"</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"mobile\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"13366666666\"</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<!--beforeend--></div><!--afterend--><ul>\n<li><strong>DELETE</strong>\n删除一个已有资源\n<em>请求示例：</em></li>\n</ul>\n<blockquote>\n<p>DELETE-&gt;http://api-bigdata.huan.tv/example-api/v1/users/123</p>\n</blockquote>\n<pre><code>*响应结果：*\n</code></pre>\n<!--beforebegin--><div class=\"language-json extra-class\"><!--afterbegin--><pre v-pre class=\"language-json\"><code><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"code\"</span><span class=\"token operator\">:</span><span class=\"token number\">204</span><span class=\"token punctuation\">,</span>    # 非<span class=\"token number\">2</span>xx的code表示请求响应正常\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"no content\"</span>    # message表示请求结果的状态<span class=\"token punctuation\">,</span>删除成功\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<!--beforeend--></div><!--afterend--><ul>\n<li><strong>ERROR</strong>\n代码抛异常，需要主动捕获，禁止暴露错误页面给用户\n<em>响应结果：</em></li>\n</ul>\n<!--beforebegin--><div class=\"language-json extra-class\"><!--afterbegin--><pre v-pre class=\"language-json\"><code><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"code\"</span><span class=\"token operator\">:</span><span class=\"token number\">500</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"server error\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"props\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"developer\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"张三丰\"</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<!--beforeend--></div><!--afterend--><h1 id=\"四、媒体类型\">四、媒体类型</h1>\n<p>响应数据时，Content-Type（即媒体类型）统一使用：<code>application/json;charset=UTF-8</code></p>\n<h1 id=\"五、响应结果\">五、响应结果</h1>\n<p>标准响应格式需要包含以下元素：</p>\n<ul>\n<li><strong>code</strong>【必须元素】\n响应码，int 类型。它用来描述请求结果的响应状态,详见附录：<a href=\"#%E9%99%84%E5%BD%95\">响应码列表</a>。</li>\n</ul>\n<p><em>示例：</em></p>\n<!--beforebegin--><div class=\"language-json extra-class\"><!--afterbegin--><pre v-pre class=\"language-json\"><code><span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"code\"</span><span class=\"token operator\">:</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\n    ...\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<!--beforeend--></div><!--afterend--><ul>\n<li><strong>message</strong>【必须元素】\n提示信息，string 类型。它用来描述请求后的提示性信息。数据正常响应时，给出成功提示，如果没有特殊提示，建议使用<code>sucess</code>；数据异常时，该字段需要携带具体的错误原因。\n<em>示例：</em></li>\n</ul>\n<!--beforebegin--><div class=\"language-json extra-class\"><!--afterbegin--><pre v-pre class=\"language-json\"><code># 数据正常响应\n<span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"code\"</span><span class=\"token operator\">:</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"success\"</span><span class=\"token punctuation\">,</span>\n    ...\n<span class=\"token punctuation\">}</span>\n# 数据不存在\n<span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"code\"</span><span class=\"token operator\">:</span><span class=\"token number\">404</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"message\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"No data!\"</span><span class=\"token punctuation\">,</span>\n    ...\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<!--beforeend--></div><!--afterend--><ul>\n<li><strong>data</strong>【查询请求必须元素】\n结果集，object 或 array 类型。用来封装用户请求的数据集结果。必须为结果集中的每个资源添加 <code>resource</code> 元素，以表明结果数据属于哪类资源，该元素值与URL路径的资源名词（复数）相一致。</li>\n</ul>\n<ul>\n<li>\n<ul>\n<li>单个资源\n对应 object 类型。当请求访问的是具有 ID 性质的资源，具备幂等性时，响应的结果往往是一个确定的数据，此时结果集采用 object 表示。\n<em>示例：</em></li>\n</ul>\n</li>\n</ul>\n<!--beforebegin--><div class=\"language-json extra-class\"><!--afterbegin--><pre v-pre class=\"language-json\"><code>    <span class=\"token punctuation\">{</span>\n        ...<span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"data\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"resource\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"programs\"</span><span class=\"token punctuation\">,</span>    # 资源必须需要添加resource`元素\n            <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"niisinr5cci6ikpxvcj9\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"programName\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"天龙八部\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"startTime\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"2018-10-10 20:00:00\"</span><span class=\"token punctuation\">,</span> # 时间响应统一采用格式：YYYY-MM-DD HH<span class=\"token operator\">:</span>mm<span class=\"token operator\">:</span>ss\n            <span class=\"token property\">\"endTime\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"2018-10-10 20:47:00\"</span><span class=\"token punctuation\">,</span>\n            ...\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        ...\n    <span class=\"token punctuation\">}</span>\n</code></pre>\n<!--beforeend--></div><!--afterend--><ul>\n<li>\n<ul>\n<li>集合资源\n对应 array 类型。当请求的数据集可能存在大于1的情况时，结果集采用 array 表示。\n<em>示例：</em></li>\n</ul>\n</li>\n</ul>\n<!--beforebegin--><div class=\"language-json extra-class\"><!--afterbegin--><pre v-pre class=\"language-json\"><code><span class=\"token punctuation\">{</span>\n    ...<span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"data\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"resource\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"programs\"</span><span class=\"token punctuation\">,</span>    # 资源必须需要添加resource`元素\n            <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"niisinr5cci6ikpxvcj9\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"programName\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"天龙八部 12\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"startTime\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"2018-10-10 20:00:00\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"endTime\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"2018-10-10 20:47:00\"</span><span class=\"token punctuation\">,</span>\n            ...\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"resource\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"programs\"</span><span class=\"token punctuation\">,</span>    # 资源必须需要添加resource`元素\n            <span class=\"token property\">\"id\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"qaisi83kspqcmda120\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"programName\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"天龙八部 13\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"startTime\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"2018-10-10 20:55:00\"</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"endTime\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"2018-10-10 21:41:00\"</span><span class=\"token punctuation\">,</span>\n            ...\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        ...\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    ...\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<!--beforeend--></div><!--afterend--><ul>\n<li><strong>props</strong>（附加属性数据）【非必须元素】\n当请求结果中需要额外添加说明，或者结果集中存在需要补充的数据时，推荐添加至该元素中\n<em>示例：</em></li>\n</ul>\n<!--beforebegin--><div class=\"language-json extra-class\"><!--afterbegin--><pre v-pre class=\"language-json\"><code><span class=\"token punctuation\">{</span>\n    ...<span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"props\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span>\n        <span class=\"token property\">\"total_count\"</span><span class=\"token operator\">:</span>  <span class=\"token number\">921</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"month_avg_reach\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">{</span>\n            <span class=\"token property\">\"201801\"</span><span class=\"token operator\">:</span><span class=\"token number\">28161</span><span class=\"token punctuation\">,</span>\n            <span class=\"token property\">\"201802\"</span><span class=\"token operator\">:</span><span class=\"token number\">17985</span><span class=\"token punctuation\">,</span>\n            ...\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        ...\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n\n</code></pre>\n<!--beforeend--></div><!--afterend--><h1 id=\"六、请求认证\">六、请求认证</h1>\n<p>接口认证由网关统一进行控制，请参考 <a href=\"#\">API 接口网关使用规范</a>（进行中）。 在此之前，需要由各个项目自行添加 <code>token</code> 进行安全认证</p>\n<h1 id=\"附录\">附录</h1>\n<ul>\n<li>响应状态码</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">状态码</th>\n<th style=\"text-align:left\">（推荐）响应消息</th>\n<th style=\"text-align:left\">描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">200</td>\n<td style=\"text-align:left\">OK</td>\n<td style=\"text-align:left\">查询，更新等操作成功</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">201</td>\n<td style=\"text-align:left\">Created</td>\n<td style=\"text-align:left\">创建资源成功</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">204</td>\n<td style=\"text-align:left\">No Content</td>\n<td style=\"text-align:left\">删除资源成功</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">400</td>\n<td style=\"text-align:left\">Bad Request</td>\n<td style=\"text-align:left\">请求参数异常</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">401</td>\n<td style=\"text-align:left\">Unauthorized</td>\n<td style=\"text-align:left\">未认证</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">402</td>\n<td style=\"text-align:left\">Payment Required</td>\n<td style=\"text-align:left\">待付费</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">404</td>\n<td style=\"text-align:left\">Not Found</td>\n<td style=\"text-align:left\">未找到数据</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">500</td>\n<td style=\"text-align:left\">Server Error</td>\n<td style=\"text-align:left\">服务异常</td>\n</tr>\n</tbody>\n</table>\n</div>\n",null]}